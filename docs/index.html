<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@similie/hyphen-command-center-api</title><meta name="description" content="Documentation for @similie/hyphen-command-center-api"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@similie/hyphen-command-center-api</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@similie/hyphen-command-center-api</h1></div><div class="tsd-panel tsd-typography"><h1 id="ğŸŒ-hyphen-command-center-api" class="tsd-anchor-link">ğŸŒ Hyphen Command Center API<a href="#ğŸŒ-hyphen-command-center-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><strong>Hyphen Command Center API</strong> is the backend service of the <strong>Hyphen ecosystem</strong> â€”<br>
Similie's open, extensible infrastructure for IoT device management, firmware builds,<br>
and secure real-time communication through MQTT.</p>
<p>It is built on top of <a href="https://github.com/similie/ellipsies"><strong>Ellipsies</strong></a> â€”<br>
Similie's TypeScript framework for service orchestration using <strong>TypeORM</strong>, <strong>routing-controllers</strong>,<br>
and <strong>dependency injection</strong> â€” enabling fast, modular, production-grade microservices.</p>
<hr>
<h2 id="ğŸ§­-overview" class="tsd-anchor-link">ğŸ§­ Overview<a href="#ğŸ§­-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Hyphen Command Center API acts as the <strong>control plane</strong> for connected devices.<br>
It manages:</p>
<ul>
<li>Device registration, telemetry, and command routing</li>
<li>Secure MQTT communication (AWS IoT Core or alternative brokers)</li>
<li>Firmware build orchestration through isolated Docker build containers</li>
<li>Payload forwarding to subscribed services</li>
<li>Authentication, authorization, and configuration lifecycle</li>
</ul>
<p>This API is designed to integrate directly with:</p>
<ul>
<li>ğŸ–¥ï¸ <a href="https://github.com/similie/hyphen-command-center"><strong>Hyphen Command Center (Frontend UI)</strong></a> â€”<br>
SvelteKit-based interface for managing devices, builds, and operations</li>
<li>ğŸ”Œ <a href="https://github.com/similie/hyphen-connect"><strong>Hyphen Connect</strong></a> â€”<br>
The ESP32-compatible firmware client library that allows embedded systems to connect securely</li>
</ul>
<hr>
<h2 id="ğŸ§±-architecture" class="tsd-anchor-link">ğŸ§± Architecture<a href="#ğŸ§±-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code>                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   Hyphen Command UI    â”‚
                â”‚ (SvelteKit Frontend)   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              REST / SSE   â”‚
                           â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ Hyphen Command Center APIâ”‚
               â”‚  (Node.js / Express)     â”‚
               â”‚                          â”‚
               â”‚ â€¢ Auth / Identity        â”‚
               â”‚ â€¢ Device Registry        â”‚
               â”‚ â€¢ MQTT Integration       â”‚
               â”‚ â€¢ Job Queue (BullMQ)     â”‚
               â”‚ â€¢ Webhooks / Streams     â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ PostgreSQL / TimescaleDB     â”‚
            â”‚ (Ellipsies ORM Schema)       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ MQTT Broker (AWS IoT Core)   â”‚
            â”‚   + Leader Election via Redisâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr>
<pre><code class="mermaid">flowchart TD
  CC["Hyphen Command Center (Web UI)"] <--> API["Hyphen Command Center API"]
  API <--> Ellipsies["Ellipsies (Orchestration & Workflow Engine)"]
  API <--> MQTT["MQTT Broker + Certificate Authority"]
  MQTT <--> OS["HyphenOS (Device Runtime)"]
  OS --> Sensors["Sensors / Actuators"]
  CC --> Forwarders["Forwarders / Decoders"]
  Forwarders --> External["External Systems / Data Pipelines"]
</code><button type="button">Copy</button></pre>

<h2 id="âš¡-features" class="tsd-anchor-link">âš¡ Features<a href="#âš¡-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>Device Management:</strong> Register, monitor, and control Hyphen-compatible devices</li>
<li><strong>MQTT Integration:</strong> Dynamic subscriptions with leader election via Redis</li>
<li><strong>Job Queueing:</strong> Asynchronous background processing with BullMQ</li>
<li><strong>Database Migrations:</strong> Fully managed with Drizzle ORM and TimescaleDB</li>
<li><strong>Streaming API:</strong> Real-time server-sent events for build and telemetry</li>
<li><strong>Docker Builds:</strong> On-demand PlatformIO firmware builds via Docker socket</li>
<li><strong>Secure Auth:</strong> Role-based access using JWT and bcrypt</li>
<li><strong>Extensible:</strong> Modular service runners and seeding system</li>
</ul>
<hr>
<h2 id="ğŸ§°-prerequisites" class="tsd-anchor-link">ğŸ§° Prerequisites<a href="#ğŸ§°-prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Before running the API, ensure the following are installed:</p>
<ul>
<li><a href="https://nodejs.org">Node.js 20+</a></li>
<li><a href="https://pnpm.io">pnpm</a></li>
<li><a href="https://www.docker.com/">Docker</a></li>
<li><a href="https://www.timescale.com/">PostgreSQL 16+ / TimescaleDB</a></li>
<li><a href="https://redis.io">Redis 7+</a></li>
</ul>
<p>Environment variables are defined in <code>.env</code>:</p>
<pre><code class="bash"><span class="hl-0"># Database</span><br/><span class="hl-1">DATABASE_URL</span><span class="hl-2">=</span><span class="hl-3">postgresql://postgres:postgres@db:5432/hyphen</span><br/><br/><span class="hl-0"># Make sure you have your MQTT Broker</span><br/><span class="hl-1">MQTT_HOST</span><span class="hl-2">=</span><span class="hl-3">a123456.iot.ap-southeast-1.amazonaws.com</span><br/><span class="hl-1">MQTT_PORT</span><span class="hl-2">=</span><span class="hl-3">8883</span><br/><br/><span class="hl-0"># set your AWS Credentials</span><br/><span class="hl-1">AWS_ACCESS_KEY_ID</span><span class="hl-2">=</span><br/><span class="hl-1">AWS_SECRET_ACCESS_KEY</span><span class="hl-2">=</span><br/><br/><span class="hl-0"># Redis</span><br/><span class="hl-1">REDIS_URL</span><span class="hl-2">=</span><span class="hl-3">redis://redis:6379</span><br/><br/><span class="hl-0"># Clone the repository</span><br/><span class="hl-4">git</span><span class="hl-2"> </span><span class="hl-3">clone</span><span class="hl-2"> </span><span class="hl-3">https://github.com/similie/hyphen-command-center-api.git</span><br/><span class="hl-4">cd</span><span class="hl-2"> </span><span class="hl-3">hyphen-command-center-api</span><br/><br/><span class="hl-0"># Install dependencies</span><br/><span class="hl-4">pnpm</span><span class="hl-2"> </span><span class="hl-3">install</span><br/><br/><span class="hl-0"># Run in development</span><br/><span class="hl-4">pnpm</span><span class="hl-2"> </span><span class="hl-3">dev</span><br/><br/><span class="hl-1">DB_HOST</span><span class="hl-2">=</span><span class="hl-3">localhost</span><br/><span class="hl-1">DB_USER</span><span class="hl-2">=</span><span class="hl-3">postgres</span><br/><span class="hl-1">DB_PASSWORD</span><span class="hl-2">=</span><span class="hl-3">postgres</span><br/><span class="hl-1">DB_PORT</span><span class="hl-2">=</span><span class="hl-3">5432</span><br/><span class="hl-1">DB_DATABASE</span><span class="hl-2">=</span><span class="hl-3">hyphen_api</span><span class="hl-2"> </span><span class="hl-0"># this database is not share with Hyphen Command Center UI</span><br/><span class="hl-1">MQTT_IOT_ENDPOINT</span><span class="hl-2">=</span><span class="hl-3">a123456.iot.us-east-1.amazonaws.com</span><br/><span class="hl-1">MQTT_IOT_PORT</span><span class="hl-2">=</span><span class="hl-3">8883</span><br/><span class="hl-1">SYSTEM_IDENTITY_NAME</span><span class="hl-2">=</span><span class="hl-3">CommandCenter</span><span class="hl-2"> </span><span class="hl-0"># this is the default. The name of the command center app on MQTT</span><br/><span class="hl-1">AWS_REGION</span><span class="hl-2">=</span><br/><span class="hl-1">AWS_ACCESS_KEY_ID</span><span class="hl-2">=</span><br/><span class="hl-1">AWS_SECRET_ACCESS_KEY</span><span class="hl-2">=</span><br/><span class="hl-1">MQTT_SUBSCRIPTIONS</span><span class="hl-2">=</span><span class="hl-3">&quot;Hy/#&quot;</span><span class="hl-2"> </span><span class="hl-0"># this is the base MQTT topic for listing to payloads. Similie using &quot;Hy/# in production&quot;</span><br/><span class="hl-1">JWT_CLIENT_SECRET</span><span class="hl-2">=</span><span class="hl-3">MySuperSecret</span><span class="hl-2"> </span><span class="hl-0"># this MUST match the UI frontend secret key. The JWT coming from your UI must be decoded by the API</span><br/><span class="hl-1">ENV_SECRET_KEY</span><span class="hl-2">=</span><span class="hl-3">AnotherSecretForSecrets</span><span class="hl-2"> </span><span class="hl-0"># we encrypt values in the database. This is a secret key for that encryption</span><br/><span class="hl-1">REDIS_CONFIG_URL</span><span class="hl-2">=</span><span class="hl-3">redis://localhost:6379/1</span><span class="hl-2"> </span><span class="hl-0"># this needs to be the same redis URL and DB as the UI.</span><br/><span class="hl-1">HOST_BUILDS_PATH</span><span class="hl-2">= </span><span class="hl-0"># this defaults to os.tmpDir but for our docker containers, we need to specify</span><br/><span class="hl-1">API_SERVICE_ROUTES</span><span class="hl-2">=</span><span class="hl-3">/api/v2/</span><span class="hl-2"> </span><span class="hl-0"># Similie microservices are on version 2</span><br/><span class="hl-1">API_SERVICE_ROUTES</span><span class="hl-2">=</span><span class="hl-3">1612</span><span class="hl-2"> </span><span class="hl-0"># 1612 is the service port for this application</span><br/>
</code><button type="button">Copy</button></pre>

<h2 id="ğŸ§ -developer-notes" class="tsd-anchor-link">ğŸ§  Developer Notes<a href="#ğŸ§ -developer-notes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Designed to scale with leader election that ensures only one container processes MQTT messages at a time.</li>
<li>Docker socket mounting allows isolated firmware build environments.</li>
<li>Seeds are executed via as functions in your models.</li>
<li>Easily manage your fleet security with certificate-based access to your network</li>
<li>Requires Hyphen Connect and ESP32-based hardware (some features require HyphenOS).</li>
</ul>
<table>
<thead>
<tr>
<th>Project</th>
<th>Description</th>
<th>Repository</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>HyphenOS</strong></td>
<td>The device runtime environment for ultra-reliable IoT deployments. Includes OTA, telemetry queues, watchdogs, and sensor drivers.</td>
<td><a href="https://github.com/similie/hyphen-os">https://github.com/similie/hyphen-os</a></td>
</tr>
<tr>
<td><strong>HyphenConnect</strong></td>
<td>Network + MQTT abstraction layer for ESP32 / Cellular devices. Enables function calls, variable access, and secure OTA.</td>
<td><a href="https://github.com/similie/hyphen-connect">https://github.com/similie/hyphen-connect</a></td>
</tr>
<tr>
<td><strong>Hyphen Command Center</strong></td>
<td>SvelteKit UI for managing your global device fleet, OTA updates, telemetry, and configuration.</td>
<td><a href="https://github.com/similie/hyphen-command-center">https://github.com/similie/hyphen-command-center</a></td>
</tr>
<tr>
<td><strong>Hyphen Elemental</strong></td>
<td>The hardware schematics Similie uses to for our Hyphen Elemental 4 line of Products.</td>
<td><a href="https://github.com/similie/hyphen-elemental">https://github.com/similie/hyphen-elemental</a></td>
</tr>
<tr>
<td><strong>Ellipsies</strong></td>
<td>Workflow + routing engine powering the API: device identity, build pipeline, users, orgs, storage, and message routing.</td>
<td><a href="https://github.com/similie/ellipsies">https://github.com/similie/ellipsies</a></td>
</tr>
</tbody>
</table>
<h2 id="ğŸ§‘ğŸ’»-contributing" class="tsd-anchor-link">ğŸ§‘â€ğŸ’» Contributing<a href="#ğŸ§‘ğŸ’»-contributing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>We welcome community collaboration!</p>
<p>To contribute:</p>
<ol>
<li>Fork this repository</li>
<li>Create a feature branch</li>
<li>Submit a pull request describing your changes</li>
</ol>
<p>All contributions are licensed under the same terms as the main project (GPLv3 + Similie commercial terms).</p>
<h2 id="ğŸªª-license" class="tsd-anchor-link">ğŸªª License<a href="#ğŸªª-license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This project is licensed under the GPLv3 License with additional commercial-use terms.</p>
<p>Use of this software or any derivatives for commercial or for-profit purposes
requires a commercial license from Similie.
Contact: licensing@similie.orgï¿¼</p>
<p>See the full license in LICENSE.mdï¿¼</p>
<h2 id="ğŸŒ-about-similie" class="tsd-anchor-link">ğŸŒ About Similie<a href="#ğŸŒ-about-similie" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Similie builds technology for climate resilience and community empowerment.
We develop IoT platforms, AI tools, and open-source systems to help communities better manage weather, water, and environmental risks.</p>
<p>ğŸŒ <a href="https://similie.com">https://similie.com</a></p>
<h3 id="hyphen-command-center-api" class="tsd-anchor-link">Hyphen Command Center API<a href="#hyphen-command-center-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Â© 2025 Similieï¿¼ â€” All Rights Reserved
Licensed under GPLv3 with Similie Commercial Use Terms</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#ğŸŒ-hyphen-command-center-api"><span>ğŸŒ <wbr/>Hyphen <wbr/>Command <wbr/>Center <wbr/>API</span></a><ul><li><a href="#ğŸ§­-overview"><span>ğŸ§­ <wbr/>Overview</span></a></li><li><a href="#ğŸ§±-architecture"><span>ğŸ§± <wbr/>Architecture</span></a></li><li><a href="#âš¡-features"><span>âš¡ <wbr/>Features</span></a></li><li><a href="#ğŸ§°-prerequisites"><span>ğŸ§° <wbr/>Prerequisites</span></a></li><li><a href="#ğŸ§ -developer-notes"><span>ğŸ§  <wbr/>Developer <wbr/>Notes</span></a></li><li><a href="#ğŸ§‘ğŸ’»-contributing"><span>ğŸ§‘â€ğŸ’» <wbr/>Contributing</span></a></li><li><a href="#ğŸªª-license"><span>ğŸªª <wbr/>License</span></a></li><li><a href="#ğŸŒ-about-similie"><span>ğŸŒ <wbr/>About <wbr/>Similie</span></a></li><li><ul><li><a href="#hyphen-command-center-api"><span>Hyphen <wbr/>Command <wbr/>Center <wbr/>API</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@similie/hyphen-command-center-api</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
